templated manifests should match snapshot:
  1: |
    raw: |
      - For a `Deployment` called `foo` have a `ConfigMap` called `foo-configmap`. Then add this annotation to main metadata of your `Deployment`
        configmap.reloader.stakater.com/reload: "foo-configmap"

      - For a `Deployment` called `foo` have a `Secret` called `foo-secret`. Then add this annotation to main metadata of your `Deployment`
        secret.reloader.stakater.com/reload: "foo-secret"

      - After successful installation, your pods will get rolling updates when a change in data of configmap or secret will happen.
  2: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        meta.helm.sh/release-name: RELEASE-NAME
        meta.helm.sh/release-namespace: NAMESPACE
      labels:
        app: RELEASE-NAME-reloader
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: reloader
        app.kubernetes.io/version: v1.4.13
        chart: reloader-2.2.8
        group: com.stakater.platform
        helm.sh/chart: reloader-2.2.8
        heritage: Helm
        provider: stakater
        release: RELEASE-NAME
        version: v1.4.13
      name: RELEASE-NAME-reloader
      namespace: NAMESPACE
    spec:
      replicas: 1
      revisionHistoryLimit: 2
      selector:
        matchLabels:
          app: RELEASE-NAME-reloader
          release: RELEASE-NAME
      template:
        metadata:
          labels:
            app: RELEASE-NAME-reloader
            app.kubernetes.io/instance: RELEASE-NAME
            app.kubernetes.io/managed-by: Helm
            app.kubernetes.io/name: reloader
            app.kubernetes.io/version: v1.4.13
            chart: reloader-2.2.8
            group: com.stakater.platform
            helm.sh/chart: reloader-2.2.8
            heritage: Helm
            provider: stakater
            release: RELEASE-NAME
            version: v1.4.13
        spec:
          containers:
            - args:
                - --log-level=info
                - --reload-on-create=true
                - --sync-after-restart=true
              env:
                - name: GOMAXPROCS
                  valueFrom:
                    resourceFieldRef:
                      divisor: "1"
                      resource: limits.cpu
                - name: GOMEMLIMIT
                  valueFrom:
                    resourceFieldRef:
                      divisor: "1"
                      resource: limits.memory
                - name: KUBERNETES_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: RELOADER_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: RELOADER_DEPLOYMENT_NAME
                  value: RELEASE-NAME-reloader
              image: ghcr.io/stakater/reloader:v1.4.13
              imagePullPolicy: IfNotPresent
              livenessProbe:
                failureThreshold: 5
                httpGet:
                  path: /live
                  port: http
                initialDelaySeconds: 10
                periodSeconds: 10
                successThreshold: 1
                timeoutSeconds: 5
              name: RELEASE-NAME-reloader
              ports:
                - containerPort: 9090
                  name: http
              readinessProbe:
                failureThreshold: 5
                httpGet:
                  path: /metrics
                  port: http
                initialDelaySeconds: 10
                periodSeconds: 10
                successThreshold: 1
                timeoutSeconds: 5
              securityContext: {}
          securityContext:
            runAsNonRoot: true
            runAsUser: 65534
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: RELEASE-NAME-reloader
  3: |
    apiVersion: rbac.authorization.k8s.io/v1beta1
    kind: Role
    metadata:
      annotations:
        meta.helm.sh/release-name: RELEASE-NAME
        meta.helm.sh/release-namespace: NAMESPACE
      labels:
        app: RELEASE-NAME-reloader
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: reloader
        app.kubernetes.io/version: v1.4.13
        chart: reloader-2.2.8
        helm.sh/chart: reloader-2.2.8
        heritage: Helm
        release: RELEASE-NAME
      name: RELEASE-NAME-reloader-role
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - ""
        resources:
          - secrets
          - configmaps
        verbs:
          - list
          - get
          - watch
      - apiGroups:
          - apps
        resources:
          - deployments
          - daemonsets
          - statefulsets
        verbs:
          - list
          - get
          - update
          - patch
      - apiGroups:
          - batch
        resources:
          - cronjobs
        verbs:
          - list
          - get
      - apiGroups:
          - batch
        resources:
          - jobs
        verbs:
          - create
          - delete
          - list
          - get
      - apiGroups:
          - ""
        resources:
          - events
        verbs:
          - create
          - patch
  4: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      annotations:
        meta.helm.sh/release-name: RELEASE-NAME
        meta.helm.sh/release-namespace: NAMESPACE
      labels:
        app: RELEASE-NAME-reloader
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: reloader
        app.kubernetes.io/version: v1.4.13
        chart: reloader-2.2.8
        helm.sh/chart: reloader-2.2.8
        heritage: Helm
        release: RELEASE-NAME
      name: RELEASE-NAME-reloader-metadata-role
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - ""
        resources:
          - configmaps
        verbs:
          - list
          - get
          - watch
          - create
          - update
  5: |
    apiVersion: rbac.authorization.k8s.io/v1beta1
    kind: RoleBinding
    metadata:
      annotations:
        meta.helm.sh/release-name: RELEASE-NAME
        meta.helm.sh/release-namespace: NAMESPACE
      labels:
        app: RELEASE-NAME-reloader
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: reloader
        app.kubernetes.io/version: v1.4.13
        chart: reloader-2.2.8
        helm.sh/chart: reloader-2.2.8
        heritage: Helm
        release: RELEASE-NAME
      name: RELEASE-NAME-reloader-role-binding
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: RELEASE-NAME-reloader-role
    subjects:
      - kind: ServiceAccount
        name: RELEASE-NAME-reloader
        namespace: NAMESPACE
  6: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      annotations:
        meta.helm.sh/release-name: RELEASE-NAME
        meta.helm.sh/release-namespace: NAMESPACE
      labels:
        app: RELEASE-NAME-reloader
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: reloader
        app.kubernetes.io/version: v1.4.13
        chart: reloader-2.2.8
        helm.sh/chart: reloader-2.2.8
        heritage: Helm
        release: RELEASE-NAME
      name: RELEASE-NAME-reloader-metadata-role-binding
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: RELEASE-NAME-reloader-metadata-role
    subjects:
      - kind: ServiceAccount
        name: RELEASE-NAME-reloader
        namespace: NAMESPACE
  7: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      annotations:
        meta.helm.sh/release-name: RELEASE-NAME
        meta.helm.sh/release-namespace: NAMESPACE
      labels:
        app: RELEASE-NAME-reloader
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: reloader
        app.kubernetes.io/version: v1.4.13
        chart: reloader-2.2.8
        helm.sh/chart: reloader-2.2.8
        heritage: Helm
        release: RELEASE-NAME
      name: RELEASE-NAME-reloader
      namespace: NAMESPACE
  8: |
    apiVersion: cert-manager.io/v1
    kind: Certificate
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    spec:
      dnsNames:
        - release-name-azimuth-capi-operator.NAMESPACE.svc
        - release-name-azimuth-capi-operator.NAMESPACE.svc.cluster.local
      issuerRef:
        kind: Issuer
        name: release-name-azimuth-capi-operator
      secretName: release-name-azimuth-capi-operator-cert
  9: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRole
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    rules:
      - apiGroups:
          - apiextensions.k8s.io
        resources:
          - customresourcedefinitions
        verbs:
          - list
          - get
          - watch
          - create
      - apiGroups:
          - apiextensions.k8s.io
        resourceNames:
          - clustertemplates.azimuth.stackhpc.com
          - clusters.azimuth.stackhpc.com
          - apptemplates.azimuth.stackhpc.com
        resources:
          - customresourcedefinitions
        verbs:
          - update
          - patch
      - apiGroups:
          - ""
        resources:
          - namespaces
        verbs:
          - list
          - watch
      - apiGroups:
          - ""
          - events.k8s.io
        resources:
          - events
        verbs:
          - create
      - apiGroups:
          - azimuth.stackhpc.com
        resources:
          - '*'
        verbs:
          - '*'
      - apiGroups:
          - ""
        resources:
          - serviceaccounts
        verbs:
          - '*'
      - apiGroups:
          - rbac.authorization.k8s.io
        resources:
          - roles
          - rolebindings
        verbs:
          - '*'
      - apiGroups:
          - ""
        resources:
          - secrets
        verbs:
          - '*'
      - apiGroups:
          - cluster.x-k8s.io
        resources:
          - clusters
          - machinedeployments
          - machines
          - machinehealthchecks
        verbs:
          - '*'
      - apiGroups:
          - bootstrap.cluster.x-k8s.io
        resources:
          - kubeadmconfigtemplates
        verbs:
          - '*'
      - apiGroups:
          - controlplane.cluster.x-k8s.io
        resources:
          - kubeadmcontrolplanes
        verbs:
          - '*'
      - apiGroups:
          - infrastructure.cluster.x-k8s.io
        resources:
          - openstackclusters
          - openstackmachinetemplates
        verbs:
          - '*'
      - apiGroups:
          - addons.stackhpc.com
        resources:
          - '*'
        verbs:
          - '*'
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - '*'
      - apiGroups:
          - batch
        resources:
          - jobs
        verbs:
          - '*'
      - apiGroups:
          - infrastructure.cluster.x-k8s.io
        resources:
          - openstackmachines
        verbs:
          - list
          - get
          - watch
      - apiGroups:
          - identity.azimuth.stackhpc.com
        resources:
          - realms
        verbs:
          - list
          - get
          - watch
      - apiGroups:
          - identity.azimuth.stackhpc.com
        resources:
          - oidcclients
          - platforms
        verbs:
          - '*'
      - apiGroups:
          - scheduling.azimuth.stackhpc.com
        resources:
          - leases
        verbs:
          - list
          - get
          - watch
          - patch
      - apiGroups:
          - notification.toolkit.fluxcd.io
        resources:
          - alerts
          - providers
          - receivers
        verbs:
          - get
          - list
          - watch
          - patch
          - update
          - create
          - delete
      - apiGroups:
          - source.toolkit.fluxcd.io
        resources:
          - buckets
          - gitrepositories
          - helmcharts
          - ocirepositories
          - helmrepositories
        verbs:
          - get
          - list
          - watch
          - patch
          - update
          - create
          - delete
      - apiGroups:
          - helm.toolkit.fluxcd.io
        resources:
          - helmreleases
        verbs:
          - get
          - list
          - watch
          - patch
          - update
          - create
          - delete
      - apiGroups:
          - kustomize.toolkit.fluxcd.io
        resources:
          - kustomizations
        verbs:
          - get
          - list
          - watch
          - patch
          - update
          - create
          - delete
      - apiGroups:
          - image.toolkit.fluxcd.io
        resources:
          - imagepolicies
          - imagerepositories
          - imageupdateautomations
        verbs:
          - get
          - list
          - watch
          - patch
          - update
          - create
          - delete
  10: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRoleBinding
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: ClusterRole
      name: release-name-azimuth-capi-operator
    subjects:
      - kind: ServiceAccount
        name: release-name-azimuth-capi-operator
        namespace: NAMESPACE
  11: |
    apiVersion: v1
    data:
      azimuth_capi_operator_apps_dashboard.json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": {
                  "type": "grafana",
                  "uid": "-- Grafana --"
                },
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "target": {
                  "limit": 100,
                  "matchAny": false,
                  "tags": [],
                  "type": "dashboard"
                },
                "type": "dashboard"
              }
            ]
          },
          "editable": false,
          "fiscalYearStartMonth": 0,
          "graphTooltip": 0,
          "links": [],
          "liveNow": false,
          "panels": [
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 2,
              "panels": [],
              "title": "Apps",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "text",
                    "mode": "fixed"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 0,
                "y": 1
              },
              "id": 4,
              "options": {
                "colorMode": "none",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_app_info{app_template=~\".+\"}) by (app_namespace, app_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Total apps",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Pending"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Preparing"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Deployed"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "green",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Installing"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "blue",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Upgrading"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "purple",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Uninstalling"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Failed"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "dark-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unknown"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "text",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 7,
                "w": 9,
                "x": 6,
                "y": 1
              },
              "id": 10,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_app_phase{app_template=~\".+\",phase=~\".+\"}) by (app_namespace, app_name)) by (phase)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "App phase",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 7,
                "w": 9,
                "x": 15,
                "y": 1
              },
              "id": 21,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_app_info{app_template=~\".+\"}) by(app_namespace, app_name)) by(app_namespace)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Apps by namespace",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "green",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 0,
                "y": 5
              },
              "id": 6,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_app_phase{app_template=~\".+\",phase=\"Deployed\"}) by(app_namespace, app_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Deployed apps",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 3,
                "y": 5
              },
              "id": 8,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_app_phase{app_template=~\".+\",phase=~\"Failed|Unknown\"}) by (app_namespace, app_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Failed apps",
              "type": "stat"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 8
              },
              "id": 23,
              "panels": [],
              "title": "App templates",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "text",
                    "mode": "fixed"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 0,
                "y": 9
              },
              "id": 15,
              "options": {
                "colorMode": "none",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_apptemplate_info) by(template_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "App templates",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 7,
                "w": 9,
                "x": 6,
                "y": 9
              },
              "id": 12,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_app_info{app_template=~\".+\"}) by (app_namespace, app_name)) by (app_template)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Apps by template",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "The number of apps running outdated versions of each app template",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 7,
                "w": 9,
                "x": 15,
                "y": 9
              },
              "id": 14,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_app_info{app_template=~\".+\"} unless (azimuth_kube_app_info{app_template=~\".+\"} * on(instance, app_template, chart_version) group_left() label_replace(label_replace(azimuth_kube_apptemplate_latest_version, \"chart_version\", \"$1\", \"version\", \"(.+)\"), \"app_template\", \"$1\", \"template_name\", \"(.+)\"))) by(app_namespace, app_name)) by(app_template)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Outdated apps by template",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "Number of templates that have not been synced for more than 24 hours",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "#EAB839",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 0,
                "y": 13
              },
              "id": 19,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum((topk(1, azimuth_kube_apptemplate_last_sync) by(template_name) + 86400) < bool time())",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Unsynced templates",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "The number of apps running an outdated version of a template",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "#EAB839",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 3,
                "y": 13
              },
              "id": 17,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_app_info{app_template=~\".+\"} unless (azimuth_kube_app_info{app_template=~\".+\"} * on(instance, app_template, chart_version) group_left() label_replace(label_replace(azimuth_kube_apptemplate_latest_version, \"chart_version\", \"$1\", \"version\", \"(.+)\"), \"app_template\", \"$1\", \"template_name\", \"(.+)\"))) by(app_namespace, app_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Outdated apps",
              "type": "stat"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 16
              },
              "id": 29,
              "panels": [],
              "title": "App template details",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "displayMode": "auto",
                    "filterable": true,
                    "inspect": false
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value #A"
                    },
                    "properties": [
                      {
                        "id": "unit",
                        "value": "dateTimeFromNow"
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 9,
                "w": 24,
                "x": 0,
                "y": 17
              },
              "id": 31,
              "options": {
                "footer": {
                  "enablePagination": true,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "frameIndex": 2,
                "showHeader": true
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "topk(1, azimuth_kube_apptemplate_info * on(instance, template_name) group_left(latest_version) label_replace(azimuth_kube_apptemplate_latest_version, \"latest_version\", \"$1\", \"version\", \"(.+)\") * on(instance, template_name) group_left() azimuth_kube_apptemplate_last_sync * 1000) by(template_name)",
                  "format": "table",
                  "instant": true,
                  "interval": "",
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "count(topk(1, azimuth_kube_apptemplate_version) by(template_name, version)) by(template_name)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "B"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "count(topk(1, label_replace(azimuth_kube_app_info{app_template=~\".+\"}, \"template_name\", \"$1\", \"app_template\", \"(.+)\")) by(app_namespace, app_name)) by(template_name)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "C"
                }
              ],
              "title": "App templates",
              "transformations": [
                {
                  "id": "joinByField",
                  "options": {
                    "byField": "template_name",
                    "mode": "outer"
                  }
                },
                {
                  "id": "organize",
                  "options": {
                    "excludeByName": {
                      "Time": true,
                      "Time 1": true,
                      "Time 2": true,
                      "Time 3": true,
                      "Value": false,
                      "__name__": true,
                      "container": true,
                      "customresource_group": true,
                      "customresource_kind": true,
                      "customresource_version": true,
                      "endpoint": true,
                      "instance": true,
                      "job": true,
                      "namespace": true,
                      "pod": true,
                      "service": true
                    },
                    "indexByName": {
                      "Time 1": 17,
                      "Time 2": 18,
                      "Time 3": 19,
                      "Value #A": 5,
                      "Value #B": 4,
                      "Value #C": 6,
                      "chart_name": 2,
                      "chart_repo": 1,
                      "container": 7,
                      "customresource_group": 8,
                      "customresource_kind": 9,
                      "customresource_version": 10,
                      "endpoint": 11,
                      "instance": 12,
                      "job": 13,
                      "latest_version": 3,
                      "namespace": 14,
                      "pod": 15,
                      "service": 16,
                      "template_name": 0
                    },
                    "renameByName": {
                      "Value": "Last Sync",
                      "Value #A": "Last Sync",
                      "Value #B": "Num Versions",
                      "Value #C": "Num Deployments",
                      "chart_name": "Chart Name",
                      "chart_repo": "Chart Repo",
                      "latest_version": "Latest Version",
                      "template_name": "Template Name"
                    }
                  }
                }
              ],
              "type": "table"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 26
              },
              "id": 27,
              "panels": [],
              "title": "App details",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "displayMode": "color-background-solid",
                    "filterable": true,
                    "inspect": false
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "phase"
                    },
                    "properties": [
                      {
                        "id": "mappings",
                        "value": [
                          {
                            "options": {
                              "Deployed": {
                                "color": "green",
                                "index": 2
                              },
                              "Failed": {
                                "color": "semi-dark-red",
                                "index": 6
                              },
                              "Installing": {
                                "color": "blue",
                                "index": 3
                              },
                              "Pending": {
                                "color": "super-light-yellow",
                                "index": 0
                              },
                              "Preparing": {
                                "color": "yellow",
                                "index": 1
                              },
                              "Uninstalling": {
                                "color": "super-light-red",
                                "index": 5
                              },
                              "Upgrading": {
                                "color": "purple",
                                "index": 4
                              }
                            },
                            "type": "value"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value"
                    },
                    "properties": [
                      {
                        "id": "unit",
                        "value": "bool_yes_no"
                      },
                      {
                        "id": "thresholds",
                        "value": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "orange",
                              "value": null
                            },
                            {
                              "color": "transparent",
                              "value": 1
                            }
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "app"
                    },
                    "properties": [
                      {
                        "id": "custom.minWidth",
                        "value": 300
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 9,
                "w": 24,
                "x": 0,
                "y": 27
              },
              "id": 25,
              "options": {
                "footer": {
                  "enablePagination": true,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true,
                "sortBy": []
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "label_join(topk(1, (azimuth_kube_app_info{app_template=~\".+\"} * on(instance, app_namespace, app_name) group_left(phase) azimuth_kube_app_phase * on(instance, app_template, chart_version) group_left() label_replace(label_replace(azimuth_kube_apptemplate_latest_version, \"chart_version\", \"$1\", \"version\", \"(.+)\"), \"app_template\", \"$1\", \"template_name\", \"(.+)\")) or (((azimuth_kube_app_info{app_template=~\".+\"} * on(instance, app_namespace, app_name) group_left(phase) azimuth_kube_app_phase) - 1) unless (azimuth_kube_app_info{app_template=~\".+\"} * on(instance, app_template, chart_version) group_left() label_replace(label_replace(azimuth_kube_apptemplate_latest_version, \"chart_version\", \"$1\", \"version\", \"(.+)\"), \"app_template\", \"$1\", \"template_name\", \"(.+)\")))) by (app_namespace, app_name), \"app\", \"/\", \"app_namespace\", \"app_name\")",
                  "format": "table",
                  "instant": true,
                  "interval": "",
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Apps",
              "transformations": [
                {
                  "id": "organize",
                  "options": {
                    "excludeByName": {
                      "Time": true,
                      "Value": false,
                      "__name__": true,
                      "app_name": true,
                      "app_namespace": true,
                      "chart_name": true,
                      "chart_repo": true,
                      "chart_version": false,
                      "container": true,
                      "customresource_group": true,
                      "customresource_kind": true,
                      "customresource_version": true,
                      "endpoint": true,
                      "instance": true,
                      "job": true,
                      "namespace": true,
                      "pod": true,
                      "release_name": true,
                      "service": true,
                      "target_cluster": true,
                      "target_namespace": true
                    },
                    "indexByName": {
                      "Time": 5,
                      "Value": 3,
                      "app": 0,
                      "app_name": 7,
                      "app_namespace": 6,
                      "app_template": 1,
                      "chart_name": 8,
                      "chart_repo": 9,
                      "chart_version": 2,
                      "container": 10,
                      "customresource_group": 11,
                      "customresource_kind": 12,
                      "customresource_version": 13,
                      "endpoint": 14,
                      "instance": 15,
                      "job": 16,
                      "namespace": 17,
                      "phase": 4,
                      "pod": 18,
                      "release_name": 19,
                      "service": 20,
                      "target_cluster": 21,
                      "target_namespace": 22
                    },
                    "renameByName": {
                      "Value": "Up-to-date?",
                      "app": "App",
                      "app_name": "",
                      "app_namespace": "",
                      "app_template": "Template",
                      "chart_version": "Version",
                      "customresource_kind": "",
                      "phase": "Phase"
                    }
                  }
                }
              ],
              "type": "table"
            }
          ],
          "refresh": "30s",
          "schemaVersion": 37,
          "style": "dark",
          "tags": [],
          "templating": {
            "list": [
              {
                "current": {
                  "selected": false,
                  "text": "Prometheus",
                  "value": "Prometheus"
                },
                "hide": 0,
                "includeAll": false,
                "label": "Data Source",
                "multi": false,
                "name": "datasource",
                "options": [],
                "query": "prometheus",
                "queryValue": "",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "type": "datasource"
              }
            ]
          },
          "time": {
            "from": "now-15m",
            "to": "now"
          },
          "timepicker": {},
          "timezone": "utc",
          "title": "Azimuth / Kubernetes apps",
          "uid": "0NuiYNUVk",
          "version": 14,
          "weekStart": ""
        }
      azimuth_capi_operator_clusters_dashboard.json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": {
                  "type": "grafana",
                  "uid": "-- Grafana --"
                },
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "target": {
                  "limit": 100,
                  "matchAny": false,
                  "tags": [],
                  "type": "dashboard"
                },
                "type": "dashboard"
              }
            ]
          },
          "editable": false,
          "fiscalYearStartMonth": 0,
          "graphTooltip": 0,
          "links": [],
          "liveNow": false,
          "panels": [
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 21,
              "panels": [],
              "title": "Clusters Overview",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "text",
                    "mode": "fixed"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 0,
                "y": 1
              },
              "id": 2,
              "options": {
                "colorMode": "none",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_template) by(cluster_namespace, cluster_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Total clusters",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Reconciling"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "blue",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Upgrading"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "purple",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Ready"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "green",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Deleting"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unhealthy"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "orange",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Failed"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "dark-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unknown"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "text",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 5,
                "w": 9,
                "x": 6,
                "y": 1
              },
              "id": 13,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_phase{phase=~\".+\"}) by(cluster_namespace, cluster_name)) by(phase)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Cluster phase",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Pending"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Provisioning"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "blue",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Provisioned"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "green",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Deleting"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Failed"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "dark-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unknown"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "#ccccdb",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 5,
                "w": 9,
                "x": 15,
                "y": 1
              },
              "id": 42,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_template) by(cluster_namespace, cluster_name)) by(cluster_namespace)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Clusters by namespace",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "green",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 0,
                "y": 5
              },
              "id": 4,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_phase{phase=\"Ready\"}) by(cluster_namespace, cluster_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Ready clusters",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "#EAB839",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 3,
                "y": 5
              },
              "id": 10,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_phase{phase=~\"Unhealthy|Failed|Unknown\"}) by(cluster_namespace, cluster_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Unhealthy clusters",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 5,
                "w": 9,
                "x": 6,
                "y": 6
              },
              "id": 17,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_kube_version) by(cluster_namespace, cluster_name)) by(kube_version)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Cluster version",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Pending"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "ScalingUp"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "dark-blue",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "ScalingDown"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "light-blue",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Upgrading"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "purple",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Ready"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "green",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Deleting"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unhealthy"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "orange",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Failed"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "dark-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unknown"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "#ccccdb",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 5,
                "w": 9,
                "x": 15,
                "y": 6
              },
              "id": 18,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_control_plane_phase{phase=~\".+\"}) by(cluster_namespace, cluster_name)) by(phase)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Control plane phase",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "green",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 0,
                "y": 8
              },
              "id": 15,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_control_plane_phase{phase=\"Ready\"}) by(cluster_namespace, cluster_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Ready control planes",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "#EAB839",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 3,
                "y": 8
              },
              "id": 16,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_control_plane_phase{phase=~\"Unhealthy|Failed|Unknown\"}) by(cluster_namespace, cluster_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Unhealthy control planes",
              "type": "stat"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 11
              },
              "id": 23,
              "panels": [],
              "title": "Nodes Overview",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "text",
                    "mode": "fixed"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 0,
                "y": 12
              },
              "id": 19,
              "options": {
                "colorMode": "none",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_node_phase{phase=~\".+\"}) by(cluster_namespace, cluster_name, node))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Total nodes",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Pending"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Provisioning"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "blue",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Ready"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "green",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Deleting"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Deleted"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "light-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unhealthy"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "orange",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Failed"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "dark-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unknown"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "text",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 6,
                "w": 9,
                "x": 6,
                "y": 12
              },
              "id": 26,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_node_phase{phase=~\".+\"}) by(cluster_namespace, cluster_name, node)) by(phase)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Node phase",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 6,
                "w": 9,
                "x": 15,
                "y": 12
              },
              "id": 27,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_node_kubelet_version) by(cluster_namespace, cluster_name, node)) by(kubelet_version)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Node kubelet version",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "green",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 0,
                "y": 15
              },
              "id": 24,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_node_phase{phase=\"Ready\"}) by(cluster_namespace, cluster_name, node))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Ready nodes",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "#EAB839",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 3,
                "y": 15
              },
              "id": 25,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_node_phase{phase=~\"Unhealthy|Failed|Unknown\"}) by(cluster_namespace, cluster_name, node))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Unhealthy nodes",
              "type": "stat"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 18
              },
              "id": 29,
              "panels": [],
              "title": "Addons Overview",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "text",
                    "mode": "fixed"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 0,
                "y": 19
              },
              "id": 30,
              "options": {
                "colorMode": "none",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_addon_phase{phase=~\".+\"}) by(cluster_namespace, cluster_name, addon))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Total addons",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Pending"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Preparing"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Deployed"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "green",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Installing"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "blue",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Upgrading"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "purple",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Uninstalling"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "super-light-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Failed"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "dark-red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unknown"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "text",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 6,
                "w": 9,
                "x": 6,
                "y": 19
              },
              "id": 33,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_addon_phase{phase=~\".+\"}) by(cluster_namespace, cluster_name, addon)) by(phase)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Addon phase",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "green",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 0,
                "y": 22
              },
              "id": 31,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_addon_phase{phase=\"Deployed\"}) by(cluster_namespace, cluster_name, addon))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Deployed addons",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 3,
                "y": 22
              },
              "id": 32,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_node_phase{phase=~\"Failed|Unknown\"}) by(cluster_namespace, cluster_name, addon))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Failed addons",
              "type": "stat"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 25
              },
              "id": 35,
              "panels": [],
              "title": "Cluster Templates Overview",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "text",
                    "mode": "fixed"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 0,
                "y": 26
              },
              "id": 36,
              "options": {
                "colorMode": "none",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_clustertemplate_kube_version) by(template_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Cluster templates",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 6,
                "w": 9,
                "x": 6,
                "y": 26
              },
              "id": 14,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_template) by(cluster_namespace, cluster_name)) by(template)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Clusters by template",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 25,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "normal"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 6,
                "w": 9,
                "x": 15,
                "y": 26
              },
              "id": 41,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "expr": "sum(topk(1, azimuth_kube_cluster_template * on(instance, template) group_left() label_replace(azimuth_kube_clustertemplate_deprecated, \"template\", \"$1\", \"template_name\", \"(.+)\")) by(cluster_namespace, cluster_name)) by(template)",
                  "legendFormat": "__auto",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Clusters using deprecated templates",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "Number of cluster templates that are marked as deprecated.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "orange",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 0,
                "y": 29
              },
              "id": 38,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_clustertemplate_deprecated) by(template_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Deprecated templates",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "Number of clusters that are using a deprecated template.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "transparent",
                        "value": null
                      },
                      {
                        "color": "orange",
                        "value": 1
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 3,
                "y": 29
              },
              "id": 39,
              "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "pluginVersion": "9.3.6",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "$datasource"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(topk(1, azimuth_kube_cluster_template * on(instance, template) group_left() label_replace(azimuth_kube_clustertemplate_deprecated, \"template\", \"$1\", \"template_name\", \"(.+)\")) by(cluster_namespace, cluster_name))",
                  "instant": true,
                  "legendFormat": "__auto",
                  "range": false,
                  "refId": "A"
                }
              ],
              "title": "Deprecated clusters",
              "type": "stat"
            },
            {
              "collapsed": true,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 32
              },
              "id": 56,
              "panels": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "align": "auto",
                        "displayMode": "color-background-solid",
                        "inspect": false
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "transparent",
                            "value": null
                          }
                        ]
                      }
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "template_name"
                        },
                        "properties": [
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "kube_version"
                        },
                        "properties": [
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "Value #A"
                        },
                        "properties": [
                          {
                            "id": "unit",
                            "value": "bool_yes_no"
                          },
                          {
                            "id": "thresholds",
                            "value": {
                              "mode": "absolute",
                              "steps": [
                                {
                                  "color": "transparent",
                                  "value": null
                                },
                                {
                                  "color": "#EAB839",
                                  "value": 1
                                }
                              ]
                            }
                          },
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "Value #B"
                        },
                        "properties": [
                          {
                            "id": "noValue",
                            "value": "0"
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 9,
                    "w": 24,
                    "x": 0,
                    "y": 33
                  },
                  "id": 58,
                  "options": {
                    "footer": {
                      "enablePagination": true,
                      "fields": "",
                      "reducer": [
                        "sum"
                      ],
                      "show": false
                    },
                    "showHeader": true
                  },
                  "pluginVersion": "9.3.6",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "editorMode": "code",
                      "exemplar": false,
                      "expr": "topk(1, azimuth_kube_clustertemplate_kube_version * on(instance, template_name) group_left() azimuth_kube_clustertemplate_deprecated) by(template_name)",
                      "format": "table",
                      "instant": true,
                      "legendFormat": "__auto",
                      "range": false,
                      "refId": "A"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "editorMode": "code",
                      "exemplar": false,
                      "expr": "label_replace(count(topk(1, azimuth_kube_cluster_template) by(cluster_namespace, cluster_name)) by(template), \"template_name\", \"$1\", \"template\", \"(.+)\")",
                      "format": "table",
                      "hide": false,
                      "instant": true,
                      "legendFormat": "__auto",
                      "range": false,
                      "refId": "B"
                    }
                  ],
                  "title": "Cluster Templates",
                  "transformations": [
                    {
                      "id": "joinByField",
                      "options": {
                        "byField": "template_name",
                        "mode": "outer"
                      }
                    },
                    {
                      "id": "organize",
                      "options": {
                        "excludeByName": {
                          "Time": true,
                          "Time 1": true,
                          "Time 2": true,
                          "container": true,
                          "customresource_group": true,
                          "customresource_kind": true,
                          "customresource_version": true,
                          "endpoint": true,
                          "instance": true,
                          "job": true,
                          "namespace": true,
                          "pod": true,
                          "service": true,
                          "template": true
                        },
                        "indexByName": {
                          "Time 1": 14,
                          "Time 2": 15,
                          "Value #A": 2,
                          "Value #B": 3,
                          "container": 4,
                          "customresource_group": 5,
                          "customresource_kind": 6,
                          "customresource_version": 7,
                          "endpoint": 8,
                          "instance": 9,
                          "job": 10,
                          "kube_version": 1,
                          "namespace": 11,
                          "pod": 12,
                          "service": 13,
                          "template": 16,
                          "template_name": 0
                        },
                        "renameByName": {
                          "Value": "Deprecated?",
                          "Value #A": "Deprecated?",
                          "Value #B": "Cluster Count",
                          "kube_version": "Kubernetes Version",
                          "template_name": "Name"
                        }
                      }
                    }
                  ],
                  "type": "table"
                }
              ],
              "title": "Cluster Template Details",
              "type": "row"
            },
            {
              "collapsed": true,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 33
              },
              "id": 44,
              "panels": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "align": "auto",
                        "displayMode": "color-background-solid",
                        "filterable": false,
                        "inspect": false,
                        "minWidth": 100
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "transparent",
                            "value": null
                          }
                        ]
                      }
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "phase"
                        },
                        "properties": [
                          {
                            "id": "mappings",
                            "value": [
                              {
                                "options": {
                                  "Deleting": {
                                    "color": "super-light-red",
                                    "index": 3
                                  },
                                  "Failed": {
                                    "color": "semi-dark-red",
                                    "index": 5
                                  },
                                  "Ready": {
                                    "color": "green",
                                    "index": 2
                                  },
                                  "Reconciling": {
                                    "color": "blue",
                                    "index": 0
                                  },
                                  "Unhealthy": {
                                    "color": "orange",
                                    "index": 4
                                  },
                                  "Upgrading": {
                                    "color": "purple",
                                    "index": 1
                                  }
                                },
                                "type": "value"
                              }
                            ]
                          },
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "networking_phase"
                        },
                        "properties": [
                          {
                            "id": "mappings",
                            "value": [
                              {
                                "options": {
                                  "Deleting": {
                                    "color": "super-light-red",
                                    "index": 3
                                  },
                                  "Failed": {
                                    "color": "semi-dark-red",
                                    "index": 4
                                  },
                                  "Pending": {
                                    "color": "super-light-yellow",
                                    "index": 0
                                  },
                                  "Provisioned": {
                                    "color": "green",
                                    "index": 2
                                  },
                                  "Provisioning": {
                                    "color": "blue",
                                    "index": 1
                                  }
                                },
                                "type": "value"
                              }
                            ]
                          },
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "control_plane_phase"
                        },
                        "properties": [
                          {
                            "id": "mappings",
                            "value": [
                              {
                                "options": {
                                  "Deleting": {
                                    "color": "super-light-red",
                                    "index": 5
                                  },
                                  "Failed": {
                                    "color": "semi-dark-red",
                                    "index": 7
                                  },
                                  "Pending": {
                                    "color": "super-light-yellow",
                                    "index": 0
                                  },
                                  "Ready": {
                                    "color": "green",
                                    "index": 4
                                  },
                                  "ScalingDown": {
                                    "color": "light-blue",
                                    "index": 2
                                  },
                                  "ScalingUp": {
                                    "color": "semi-dark-blue",
                                    "index": 1
                                  },
                                  "Unhealthy": {
                                    "color": "orange",
                                    "index": 6
                                  },
                                  "Upgrading": {
                                    "color": "purple",
                                    "index": 3
                                  }
                                },
                                "type": "value"
                              }
                            ]
                          },
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "Cluster"
                        },
                        "properties": [
                          {
                            "id": "custom.minWidth",
                            "value": 300
                          },
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "Value #D"
                        },
                        "properties": [
                          {
                            "id": "unit",
                            "value": "bool_yes_no"
                          },
                          {
                            "id": "thresholds",
                            "value": {
                              "mode": "absolute",
                              "steps": [
                                {
                                  "color": "transparent",
                                  "value": null
                                },
                                {
                                  "color": "orange",
                                  "value": 1
                                }
                              ]
                            }
                          },
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "template"
                        },
                        "properties": [
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "kube_version"
                        },
                        "properties": [
                          {
                            "id": "custom.filterable",
                            "value": true
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 9,
                    "w": 24,
                    "x": 0,
                    "y": 43
                  },
                  "id": 46,
                  "options": {
                    "footer": {
                      "enablePagination": true,
                      "fields": "",
                      "reducer": [
                        "sum"
                      ],
                      "show": false
                    },
                    "showHeader": true,
                    "sortBy": []
                  },
                  "pluginVersion": "9.3.6",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "editorMode": "code",
                      "exemplar": false,
                      "expr": "label_join(topk(1, azimuth_kube_cluster_template * on(instance, cluster_namespace, cluster_name) group_left(kube_version) azimuth_kube_cluster_kube_version * on(instance, cluster_namespace, cluster_name) group_left(phase) azimuth_kube_cluster_phase * on(instance, cluster_namespace, cluster_name) group_left(networking_phase) label_replace(azimuth_kube_cluster_networking_phase, \"networking_phase\", \"$1\", \"phase\", \"(.+)\") * on(instance, cluster_namespace, cluster_name) group_left(control_plane_phase) label_replace(azimuth_kube_cluster_control_plane_phase, \"control_plane_phase\", \"$1\", \"phase\", \"(.+)\")) by(cluster_namespace, cluster_name), \"cluster\", \"/\", \"cluster_namespace\", \"cluster_name\")",
                      "format": "table",
                      "instant": true,
                      "legendFormat": "__auto",
                      "range": false,
                      "refId": "A"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "editorMode": "code",
                      "exemplar": false,
                      "expr": "label_join(topk(1, azimuth_kube_cluster_node_count) by(cluster_namespace, cluster_name), \"cluster\", \"/\", \"cluster_namespace\", \"cluster_name\")",
                      "format": "table",
                      "hide": false,
                      "instant": true,
                      "legendFormat": "__auto",
                      "range": false,
                      "refId": "B"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "editorMode": "code",
                      "exemplar": false,
                      "expr": "label_join(topk(1, azimuth_kube_cluster_addon_count) by(cluster_namespace, cluster_name), \"cluster\", \"/\", \"cluster_namespace\", \"cluster_name\")",
                      "format": "table",
                      "hide": false,
                      "instant": true,
                      "legendFormat": "__auto",
                      "range": false,
                      "refId": "C"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "editorMode": "code",
                      "exemplar": false,
                      "expr": "label_join(topk(1, label_replace(azimuth_kube_cluster_template, \"template_name\", \"$1\", \"template\", \"(.+)\") * on(instance, template_name) group_left() azimuth_kube_clustertemplate_deprecated) by(cluster_namespace, cluster_name), \"cluster\", \"/\", \"cluster_namespace\", \"cluster_name\")",
                      "format": "table",
                      "hide": false,
                      "instant": true,
                      "legendFormat": "__auto",
                      "range": false,
                      "refId": "D"
                    }
                  ],
                  "title": "Clusters",
                  "transformations": [
                    {
                      "id": "joinByField",
                      "options": {
                        "byField": "cluster",
                        "mode": "outer"
                      }
                    },
                    {
                      "id": "organize",
                      "options": {
                        "excludeByName": {
                          "Time": true,
                          "Time 1": true,
                          "Time 2": true,
                          "Time 3": true,
                          "Time 4": true,
                          "Value": true,
                          "Value #A": true,
                          "Value #B": false,
                          "__name__ 1": true,
                          "__name__ 2": true,
                          "cluster_name": true,
                          "cluster_name 1": true,
                          "cluster_name 2": true,
                          "cluster_name 3": true,
                          "cluster_name 4": true,
                          "cluster_namespace": true,
                          "cluster_namespace 1": true,
                          "cluster_namespace 2": true,
                          "cluster_namespace 3": true,
                          "cluster_namespace 4": true,
                          "container": true,
                          "container 1": true,
                          "container 2": true,
                          "container 3": true,
                          "container 4": true,
                          "customresource_group": true,
                          "customresource_group 1": true,
                          "customresource_group 2": true,
                          "customresource_group 3": true,
                          "customresource_group 4": true,
                          "customresource_kind": true,
                          "customresource_kind 1": true,
                          "customresource_kind 2": true,
                          "customresource_kind 3": true,
                          "customresource_kind 4": true,
                          "customresource_version": true,
                          "customresource_version 1": true,
                          "customresource_version 2": true,
                          "customresource_version 3": true,
                          "customresource_version 4": true,
                          "endpoint": true,
                          "endpoint 1": true,
                          "endpoint 2": true,
                          "endpoint 3": true,
                          "endpoint 4": true,
                          "instance": true,
                          "instance 1": true,
                          "instance 2": true,
                          "instance 3": true,
                          "instance 4": true,
                          "job": true,
                          "job 1": true,
                          "job 2": true,
                          "job 3": true,
                          "job 4": true,
                          "namespace": true,
                          "namespace 1": true,
                          "namespace 2": true,
                          "namespace 3": true,
                          "namespace 4": true,
                          "pod": true,
                          "pod 1": true,
                          "pod 2": true,
                          "pod 3": true,
                          "pod 4": true,
                          "service": true,
                          "service 1": true,
                          "service 2": true,
                          "service 3": true,
                          "service 4": true,
                          "template 1": false,
                          "template 2": true,
                          "template_name": true
                        },
                        "indexByName": {
                          "Time 1": 9,
                          "Time 2": 23,
                          "Time 3": 37,
                          "Time 4": 51,
                          "Value #A": 22,
                          "Value #B": 7,
                          "Value #C": 8,
                          "Value #D": 2,
                          "__name__ 1": 24,
                          "__name__ 2": 38,
                          "cluster": 0,
                          "cluster_name 1": 10,
                          "cluster_name 2": 25,
                          "cluster_name 3": 39,
                          "cluster_name 4": 52,
                          "cluster_namespace 1": 11,
                          "cluster_namespace 2": 26,
                          "cluster_namespace 3": 40,
                          "cluster_namespace 4": 53,
                          "container 1": 12,
                          "container 2": 27,
                          "container 3": 41,
                          "container 4": 54,
                          "control_plane_phase": 6,
                          "customresource_group 1": 13,
                          "customresource_group 2": 28,
                          "customresource_group 3": 42,
                          "customresource_group 4": 55,
                          "customresource_kind 1": 14,
                          "customresource_kind 2": 29,
                          "customresource_kind 3": 43,
                          "customresource_kind 4": 56,
                          "customresource_version 1": 15,
                          "customresource_version 2": 30,
                          "customresource_version 3": 44,
                          "customresource_version 4": 57,
                          "endpoint 1": 16,
                          "endpoint 2": 31,
                          "endpoint 3": 45,
                          "endpoint 4": 58,
                          "instance 1": 17,
                          "instance 2": 32,
                          "instance 3": 46,
                          "instance 4": 59,
                          "job 1": 18,
                          "job 2": 33,
                          "job 3": 47,
                          "job 4": 60,
                          "kube_version": 3,
                          "namespace 1": 19,
                          "namespace 2": 34,
                          "namespace 3": 48,
                          "namespace 4": 61,
                          "networking_phase": 5,
                          "phase": 4,
                          "pod 1": 20,
                          "pod 2": 35,
                          "pod 3": 49,
                          "pod 4": 62,
                          "service 1": 21,
                          "service 2": 36,
                          "service 3": 50,
                          "service 4": 63,
                          "template 1": 1,
                          "template 2": 64,
                          "template_name": 65
                        },
                        "renameByName": {
                          "Value #B": "Node Count",
                          "Value #C": "Addon Count",
                          "Value #D": "Deprecated?",
                          "cluster": "Cluster",
                          "cluster_name": "",
                          "cluster_namespace": "",
                          "container": "",
                          "control_plane_phase": "Control Plane",
                          "kube_version": "Kubernetes Version",
                          "networking_phase": "Networking",
                          "phase": "Phase",
                          "template": "Cluster Template",
                          "template 1": "Template"
                        }
                      }
                    }
                  ],
                  "type": "table"
                }
              ],
              "title": "Cluster Details",
              "type": "row"
            },
            {
              "collapsed": true,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 34
              },
              "id": 48,
              "panels": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "align": "auto",
                        "displayMode": "color-background-solid",
                        "filterable": true,
                        "inspect": false,
                        "minWidth": 100
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "transparent",
                            "value": null
                          }
                        ]
                      }
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "cluster"
                        },
                        "properties": [
                          {
                            "id": "custom.minWidth",
                            "value": 300
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "node"
                        },
                        "properties": [
                          {
                            "id": "custom.minWidth",
                            "value": 300
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "phase"
                        },
                        "properties": [
                          {
                            "id": "mappings",
                            "value": [
                              {
                                "options": {
                                  "Deleted": {
                                    "color": "light-red",
                                    "index": 4
                                  },
                                  "Deleting": {
                                    "color": "super-light-red",
                                    "index": 3
                                  },
                                  "Failed": {
                                    "color": "semi-dark-red",
                                    "index": 6
                                  },
                                  "Pending": {
                                    "color": "super-light-yellow",
                                    "index": 0
                                  },
                                  "Provisioning": {
                                    "color": "blue",
                                    "index": 1
                                  },
                                  "Ready": {
                                    "color": "green",
                                    "index": 2
                                  },
                                  "Unhealthy": {
                                    "color": "orange",
                                    "index": 5
                                  }
                                },
                                "type": "value"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 9,
                    "w": 24,
                    "x": 0,
                    "y": 43
                  },
                  "id": 50,
                  "options": {
                    "footer": {
                      "enablePagination": true,
                      "fields": "",
                      "reducer": [
                        "sum"
                      ],
                      "show": false
                    },
                    "showHeader": true,
                    "sortBy": [
                      {
                        "desc": false,
                        "displayName": "Cluster"
                      },
                      {
                        "desc": false,
                        "displayName": "Node"
                      }
                    ]
                  },
                  "pluginVersion": "9.3.6",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "editorMode": "code",
                      "exemplar": false,
                      "expr": "label_join(topk(1, azimuth_kube_cluster_node_phase * on(instance, cluster_namespace, cluster_name, node) group_left(kubelet_version) azimuth_kube_cluster_node_kubelet_version) by(cluster_namespace, cluster_name, node), \"cluster\", \"/\", \"cluster_namespace\", \"cluster_name\")",
                      "format": "table",
                      "instant": true,
                      "legendFormat": "__auto",
                      "range": false,
                      "refId": "A"
                    }
                  ],
                  "title": "Nodes",
                  "transformations": [
                    {
                      "id": "organize",
                      "options": {
                        "excludeByName": {
                          "Time": true,
                          "Value": true,
                          "cluster_name": true,
                          "cluster_namespace": true,
                          "container": true,
                          "customresource_group": true,
                          "customresource_kind": true,
                          "customresource_version": true,
                          "endpoint": true,
                          "group": true,
                          "instance": true,
                          "job": true,
                          "kubelet_version": false,
                          "namespace": true,
                          "pod": true,
                          "role": true,
                          "service": true
                        },
                        "indexByName": {
                          "Time": 4,
                          "Value": 19,
                          "cluster": 0,
                          "cluster_name": 5,
                          "cluster_namespace": 6,
                          "container": 7,
                          "customresource_group": 8,
                          "customresource_kind": 9,
                          "customresource_version": 10,
                          "endpoint": 11,
                          "group": 12,
                          "instance": 13,
                          "job": 14,
                          "kubelet_version": 2,
                          "namespace": 15,
                          "node": 1,
                          "phase": 3,
                          "pod": 16,
                          "role": 17,
                          "service": 18
                        },
                        "renameByName": {
                          "cluster": "Cluster",
                          "kubelet_version": "Kubelet Version",
                          "node": "Node",
                          "phase": "Phase"
                        }
                      }
                    }
                  ],
                  "type": "table"
                }
              ],
              "title": "Node Details",
              "type": "row"
            },
            {
              "collapsed": true,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 35
              },
              "id": 52,
              "panels": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "align": "auto",
                        "displayMode": "color-background-solid",
                        "filterable": true,
                        "inspect": false
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "transparent",
                            "value": null
                          }
                        ]
                      }
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "cluster"
                        },
                        "properties": [
                          {
                            "id": "custom.minWidth",
                            "value": 300
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "addon"
                        },
                        "properties": [
                          {
                            "id": "custom.width",
                            "value": 250
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "phase"
                        },
                        "properties": [
                          {
                            "id": "mappings",
                            "value": [
                              {
                                "options": {
                                  "Deployed": {
                                    "color": "green",
                                    "index": 2
                                  },
                                  "Failed": {
                                    "color": "semi-dark-red",
                                    "index": 6
                                  },
                                  "Installing": {
                                    "color": "blue",
                                    "index": 3
                                  },
                                  "Pending": {
                                    "color": "super-light-yellow",
                                    "index": 0
                                  },
                                  "Preparing": {
                                    "color": "yellow",
                                    "index": 1
                                  },
                                  "Uninstalling": {
                                    "color": "super-light-red",
                                    "index": 5
                                  },
                                  "Upgrading": {
                                    "color": "purple",
                                    "index": 4
                                  }
                                },
                                "type": "value"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 9,
                    "w": 24,
                    "x": 0,
                    "y": 44
                  },
                  "id": 54,
                  "options": {
                    "footer": {
                      "enablePagination": true,
                      "fields": "",
                      "reducer": [
                        "sum"
                      ],
                      "show": false
                    },
                    "showHeader": true,
                    "sortBy": [
                      {
                        "desc": false,
                        "displayName": "Cluster"
                      },
                      {
                        "desc": false,
                        "displayName": "Addon"
                      }
                    ]
                  },
                  "pluginVersion": "9.3.6",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "editorMode": "code",
                      "exemplar": false,
                      "expr": "label_join(topk(1, azimuth_kube_cluster_addon_phase) by(cluster_namespace, cluster_name, addon), \"cluster\", \"/\", \"cluster_namespace\", \"cluster_name\")",
                      "format": "table",
                      "instant": true,
                      "legendFormat": "__auto",
                      "range": false,
                      "refId": "A"
                    }
                  ],
                  "title": "Addons",
                  "transformations": [
                    {
                      "id": "organize",
                      "options": {
                        "excludeByName": {
                          "Time": true,
                          "Value": true,
                          "__name__": true,
                          "cluster_name": true,
                          "cluster_namespace": true,
                          "container": true,
                          "customresource_group": true,
                          "customresource_kind": true,
                          "customresource_version": true,
                          "endpoint": true,
                          "instance": true,
                          "job": true,
                          "namespace": true,
                          "pod": true,
                          "service": true
                        },
                        "indexByName": {
                          "Time": 3,
                          "Value": 17,
                          "__name__": 4,
                          "addon": 1,
                          "cluster": 0,
                          "cluster_name": 5,
                          "cluster_namespace": 6,
                          "container": 7,
                          "customresource_group": 8,
                          "customresource_kind": 9,
                          "customresource_version": 10,
                          "endpoint": 11,
                          "instance": 12,
                          "job": 13,
                          "namespace": 14,
                          "phase": 2,
                          "pod": 15,
                          "service": 16
                        },
                        "renameByName": {
                          "addon": "Addon",
                          "cluster": "Cluster",
                          "phase": "Phase"
                        }
                      }
                    }
                  ],
                  "type": "table"
                }
              ],
              "title": "Addon Details",
              "type": "row"
            }
          ],
          "refresh": "30s",
          "schemaVersion": 37,
          "style": "dark",
          "tags": [],
          "templating": {
            "list": [
              {
                "current": {
                  "selected": false,
                  "text": "Prometheus",
                  "value": "Prometheus"
                },
                "hide": 0,
                "includeAll": false,
                "label": "Data Source",
                "multi": false,
                "name": "datasource",
                "options": [],
                "query": "prometheus",
                "queryValue": "",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "type": "datasource"
              }
            ]
          },
          "time": {
            "from": "now-3h",
            "to": "now"
          },
          "timepicker": {},
          "timezone": "utc",
          "title": "Azimuth / Kubernetes clusters",
          "uid": "iOWRPVy4k",
          "version": 25,
          "weekStart": ""
        }
    kind: ConfigMap
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        grafana_dashboard: "1"
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator-dashboards
  12: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        secret.reloader.stakater.com/reload: release-name-azimuth-capi-operator-cert
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    spec:
      replicas: 1
      selector:
        matchLabels:
          app.kubernetes.io/instance: RELEASE-NAME
          app.kubernetes.io/name: azimuth-capi-operator
      strategy:
        type: Recreate
      template:
        metadata:
          annotations:
            azimuth.stackhpc.com/config-hash: e00d6ac405419fe1efdde055a73eab4bea2215fa6d87eb0b35dc30cc3eb04389
          labels:
            app.kubernetes.io/instance: RELEASE-NAME
            app.kubernetes.io/name: azimuth-capi-operator
        spec:
          containers:
            - image: ghcr.io/azimuth-cloud/azimuth-capi-operator:main
              imagePullPolicy: IfNotPresent
              name: operator
              ports:
                - containerPort: 8080
                  name: metrics
                  protocol: TCP
                - containerPort: 8443
                  name: webhook
                  protocol: TCP
              readinessProbe:
                failureThreshold: 1
                periodSeconds: 5
                tcpSocket:
                  port: webhook
              resources: {}
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
              volumeMounts:
                - mountPath: /etc/azimuth
                  name: etc-azimuth
                  readOnly: true
                - mountPath: /etc/azimuth/cert
                  name: etc-azimuth-cert
                  readOnly: true
                - mountPath: /tmp
                  name: tmp
          securityContext:
            runAsNonRoot: true
          serviceAccountName: release-name-azimuth-capi-operator
          volumes:
            - name: etc-azimuth
              secret:
                secretName: release-name-azimuth-capi-operator
            - name: etc-azimuth-cert
              secret:
                secretName: release-name-azimuth-capi-operator-cert
            - emptyDir: {}
              name: tmp
  13: |
    apiVersion: cert-manager.io/v1
    kind: Issuer
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    spec:
      selfSigned: {}
  14: |
    apiVersion: monitoring.coreos.com/v1
    kind: PrometheusRule
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    spec:
      groups:
        - name: azimuth-capi-operator.rules
          rules:
            - alert: AzimuthKubernetesClusterNotReady
              annotations:
                description: Kubernetes cluster {{ $labels.cluster_namespace }}/{{ $labels.cluster_name }} has been in a non-ready state for longer than one hour.
                summary: Kubernetes cluster has been in a non-ready state for more than one hour.
              expr: sum(azimuth_kube_cluster_phase{phase!="Ready"}) by(cluster_namespace, cluster_name) > 0
              for: 1h
              labels:
                severity: warning
            - alert: AzimuthKubernetesAppNotDeployed
              annotations:
                description: Kubernetes app {{ $labels.app_namespace }}/{{ $labels.app_name }} has taken more than one hour to deploy.
                summary: Kubernetes app has taken more than one hour to deploy.
              expr: sum(azimuth_kube_app_phase{app_template=~".+",phase!="Deployed"}) by (app_namespace, app_name) > 0
              for: 1h
              labels:
                severity: warning
            - alert: AzimuthKubernetesNgnixIngressNotRemoved
              annotations:
                description: Kubernetes cluster {{ $labels.cluster_namespace }}/{{ $labels.cluster_name }} still has nginx-ingress deployed.
                summary: Kubernetes cluster still has nginx-ingress deployed.
              expr: sum(azimuth_kube_cluster_addon_phase{addon="ingress-nginx"}) by(cluster_namespace, cluster_name) > 0
              for: 5m
              labels:
                severity: info
            - alert: AzimuthKubernetesDashboardNotRemoved
              annotations:
                description: Kubernetes cluster {{ $labels.cluster_namespace }}/{{ $labels.cluster_name }} still has kubernetes-dashboard deployed.
                summary: Kubernetes cluster still has kubernetes dashboard deployed.
              expr: sum(azimuth_kube_cluster_addon_phase{addon="kubernetes-dashboard"}) by(cluster_namespace, cluster_name) > 0
              for: 5m
              labels:
                severity: info
  15: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    stringData:
      capi-operator.yaml: |
        !include "/etc/azimuth/webhook.yaml,/etc/azimuth/user-config.yaml"
      user-config.yaml: |
        identity:
          defaultUserClusterRole:
            rules:
            - apiGroups:
              - '*'
              resources:
              - '*'
              verbs:
              - '*'
            - nonResourceURLs:
              - '*'
              verbs:
              - '*'
      webhook.yaml: |
        webhook:
          managed: false
          certfile: /etc/azimuth/cert/tls.crt
          keyfile: /etc/azimuth/cert/tls.key
  16: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    spec:
      ports:
        - name: metrics
          port: 8080
          protocol: TCP
          targetPort: metrics
        - name: webhook
          port: 443
          protocol: TCP
          targetPort: webhook
      selector:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/name: azimuth-capi-operator
      type: ClusterIP
  17: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
  18: |
    apiVersion: monitoring.coreos.com/v1
    kind: ServiceMonitor
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    spec:
      endpoints:
        - honorLabels: true
          port: metrics
      jobLabel: app.kubernetes.io/name
      selector:
        matchLabels:
          app.kubernetes.io/instance: RELEASE-NAME
          app.kubernetes.io/name: azimuth-capi-operator
  19: |
    apiVersion: admissionregistration.k8s.io/v1
    kind: ValidatingWebhookConfiguration
    metadata:
      annotations:
        cert-manager.io/inject-ca-from: NAMESPACE/release-name-azimuth-capi-operator
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-capi-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-capi-operator-0.1.0
      name: release-name-azimuth-capi-operator
    webhooks:
      - admissionReviewVersions:
          - v1
          - v1beta1
        clientConfig:
          service:
            name: release-name-azimuth-capi-operator
            namespace: NAMESPACE
            path: /validate-cluster-template
        failurePolicy: Fail
        matchPolicy: Equivalent
        name: validate-cluster-template.webhook.azimuth.stackhpc.com
        rules:
          - apiGroups:
              - azimuth.stackhpc.com
            apiVersions:
              - v1alpha1
            operations:
              - CREATE
              - UPDATE
              - DELETE
            resources:
              - clustertemplates
        sideEffects: None
      - admissionReviewVersions:
          - v1
          - v1beta1
        clientConfig:
          service:
            name: release-name-azimuth-capi-operator
            namespace: NAMESPACE
            path: /validate-cluster
        failurePolicy: Fail
        matchPolicy: Equivalent
        name: validate-cluster.webhook.azimuth.stackhpc.com
        rules:
          - apiGroups:
              - azimuth.stackhpc.com
            apiVersions:
              - v1alpha1
            operations:
              - CREATE
              - UPDATE
            resources:
              - clusters
        sideEffects: None
